@access_token = eyJhbGciOiJSUzI1NiIsImprdSI6Imh0dHBzOi8vZXJwZGV2c2QuYXV0aGVudGljYXRpb24uZXUxMC5oYW5hLm9uZGVtYW5kLmNvbS90b2tlbl9rZXlzIiwia2lkIjoiZGVmYXVsdC1qd3Qta2V5LTE2ODc5ODU4OTAiLCJ0eXAiOiJKV1QiLCJqaWQiOiAiVDlZWnMyRWdnbmYveUdoTkhaNDhtT25IMDYyVnhOdDNEMU1uSnYxb1E3az0ifQ.eyJqdGkiOiIzODUwMjE4YWQ3OTY0YzhhOWMyNWEyMWM2OGI4YTYyMiIsImV4dF9hdHRyIjp7ImVuaGFuY2VyIjoiWFNVQUEiLCJzdWJhY2NvdW50aWQiOiI2YWNlNzBhYS0wNGM1LTQwYjItYjJjOC0zZTc5Y2YzNTIyMGQiLCJ6ZG4iOiJlcnBkZXZzZCJ9LCJ4cy5zeXN0ZW0uYXR0cmlidXRlcyI6eyJ4cy5yb2xlY29sbGVjdGlvbnMiOlsiWUJDOklUOkRFVjpFWFRfRFZQTFIiLCJaQkM6QVBQX1BBQjpBRE0iLCJaQkM6QVBQX1BBQjpBUFJfTkEiLCJaQkM6TFBEX0NEOlBBWVJPTEwiXX0sImdpdmVuX25hbWUiOiJEYW5pZWwiLCJ4cy51c2VyLmF0dHJpYnV0ZXMiOnsiY29tcGFueWNvZGUiOlsiQ0ExMCIsIlVTMTAiXX0sImZhbWlseV9uYW1lIjoiQW50b25pbyIsInN1YiI6IjA0ODk4NzhhLTdlMWYtNDQxNi04OTRlLTM0YWQzYzFlYWUzNSIsInNjb3BlIjpbImNkX2NkbGl0ZXBheXJvbGx1cGxvYWRfZnMtRXJwRGV2T3JnLUVycERldlNwY0NkQXBwIXQxMjY1MzkuYWRtaW4iLCJjZF9jZGxpdGVwYXlyb2xsdXBsb2FkX2ZzLUVycERldk9yZy1FcnBEZXZTcGNDZEFwcCF0MTI2NTM5LnVwbG9hZCIsIm9wZW5pZCIsImNkX2NkbGl0ZXBheXJvbGx1cGxvYWRfZnMtRXJwRGV2T3JnLUVycERldlNwY0NkQXBwIXQxMjY1MzkuYXBwcm92ZSIsImNkX2NkbGl0ZXBheXJvbGx1cGxvYWRfZnMtRXJwRGV2T3JnLUVycERldlNwY0NkQXBwIXQxMjY1MzkuZGVsZXRlIl0sImNsaWVudF9pZCI6InNiLWNkX2NkbGl0ZXBheXJvbGx1cGxvYWRfZnMtRXJwRGV2T3JnLUVycERldlNwY0NkQXBwIXQxMjY1MzkiLCJjaWQiOiJzYi1jZF9jZGxpdGVwYXlyb2xsdXBsb2FkX2ZzLUVycERldk9yZy1FcnBEZXZTcGNDZEFwcCF0MTI2NTM5IiwiYXpwIjoic2ItY2RfY2RsaXRlcGF5cm9sbHVwbG9hZF9mcy1FcnBEZXZPcmctRXJwRGV2U3BjQ2RBcHAhdDEyNjUzOSIsImdyYW50X3R5cGUiOiJhdXRob3JpemF0aW9uX2NvZGUiLCJ1c2VyX2lkIjoiMDQ4OTg3OGEtN2UxZi00NDE2LTg5NGUtMzRhZDNjMWVhZTM1Iiwib3JpZ2luIjoiYWxsb3g4c3FwLmFjY291bnRzLm9uZGVtYW5kLmNvbSIsInVzZXJfbmFtZSI6IjE1MDk0MzA1IiwiZW1haWwiOiJEYW5pZWxfQW50b25pb0BleHRlcm5hbC5tY2tpbnNleS5jb20iLCJhdXRoX3RpbWUiOjE2ODA4NjczNTAsInJldl9zaWciOiJlNmJjNmJlMSIsImlhdCI6MTY4MDg2ODc3NSwiZXhwIjoxNjgwOTExOTc1LCJpc3MiOiJodHRwczovL2VycGRldnNkLmF1dGhlbnRpY2F0aW9uLmV1MTAuaGFuYS5vbmRlbWFuZC5jb20vb2F1dGgvdG9rZW4iLCJ6aWQiOiI2YWNlNzBhYS0wNGM1LTQwYjItYjJjOC0zZTc5Y2YzNTIyMGQiLCJhdWQiOlsic2ItY2RfY2RsaXRlcGF5cm9sbHVwbG9hZF9mcy1FcnBEZXZPcmctRXJwRGV2U3BjQ2RBcHAhdDEyNjUzOSIsImNkX2NkbGl0ZXBheXJvbGx1cGxvYWRfZnMtRXJwRGV2T3JnLUVycERldlNwY0NkQXBwIXQxMjY1MzkiLCJvcGVuaWQiXX0.lDmMSjrtHSQcbLUbJVSe0kTGtxQCzwhJU9Okfl8E6YD9vT5H6gqMIfUrXbqfZ6b3MkMmoM4yP7xYp0-pZ3OW1lEB4FkfAC9oF3icekVIyshUVJPrsWkT31vS3hmRkC5pI4oPcvTzU-NMvht-VlrgZPYWrbOAjWSOvfwlLWHx6ZxlEWkNEGIB89hOwvufY9UAX3IvFDlpzutsG302L_61XVhTIWrEIt1XZ-py3uXGdNz4MAQvL537ldTZTTmvsDOC98GGQNgoqZ44HhiDGEQb-NklEGS8oAUBur-m7R52RyCeHN5Ld0-jv6GXQ9g7mT6CuaVHJTVCGc8mi9WZUTUfaw

### Authenticate
# # @name auth
# POST https://erpdevsd.authentication.eu10.hana.ondemand.com/oauth/token HTTP/1.1
# Content-type: application/x-www-form-urlencoded

# grant_type=client_credentials
# &client_id=sb-cd_cdlitepayrollupload_fs-ErpDevOrg-ErpDevSpcCdApp!t126539
# &client_secret=PeK8fptaCVkDFYEgQOlb/eChcZQ%3D

### Create Upload
# @name batchResponse
POST http://localhost:4004/payroll/StagingUploads
Authorization: Bearer {{access_token}}
Content-Type: application/json

{
   "glCompanyCode": "US10",
   "transactionType": "01",
   "currencyCode": "USD",
   "payrollDate": "2023-01-15",
   "glPeriod": "202301",
   "effectivePeriod": "202301",
   "batchDescription": "Payroll Testing US",
   "remarks": "Dan Testing"
}


### Upload File
PUT http://localhost:4004/payroll/PayrollUploadFile/content HTTP/1.1
Authorization: Bearer {{access_token}}
Content-Type: plain/text
Content-Disposition: form-data; filename="Test-Payroll-File- U2-TranType01-Project.txt"; batchID="{{batchResponse.response.body.ID}}"

< ./testUploads/Test-Payroll-File- U2-TranType01-Project.txt

### Upload File (v4)
PUT http://localhost:4004/payroll/PayrollUploadFile/content HTTP/1.1
Authorization: Bearer {{access_token}}
Content-Type: plain/text
Content-Disposition: form-data; filename="US Practice File.txt"; batchID="{{batchResponse.response.body.ID}}"

< ./testUploads/US Practice File.txt


### Approve
POST http://localhost:4004/payroll/StagingUploads({{batchResponse.response.body.ID}})/approve
Authorization: Bearer {{access_token}}
Content-Type: application/json

{}

### Enrich
POST http://localhost:4004/payroll/StagingUploads(466)/enrich
Authorization: Bearer {{access_token}}
Content-Type: application/json

{}

### Trigger
POST http://localhost:4004/payroll/StagingUploads({{batchResponse.response.body.ID}})/trigger
Authorization: Bearer {{access_token}}
Content-Type: application/json

{}

### Trigger
POST http://localhost:4004/payroll/StagingUploads(250)/trigger
Authorization: Bearer {{access_token}}
Content-Type: application/json

{}

### View JournalEntry
GET http://localhost:4004/payroll/JournalEntry?$filter=BATCHID eq 489&$expand=items
Authorization: Bearer {{access_token}}
Content-Type: application/json


### Posting Batch - View
GET http://localhost:4004/payroll/PostingBatch?$filter=batchId eq 281
Authorization: Bearer {{auth.response.body.access_token}}
Content-Type: application/json

### Posting Batch - Update
PUT http://localhost:4004/payroll/PostingBatch(batchId=472,postingBatchId='1.1')
Authorization:Bearer {{access_token}}
Content-Type: application/json

 {
      "batchId": 472,
      "postingBatchId": "1.1",
      "postingStatus": "SUCCESS",
      "postingStatusMessage": " | Document posted successfully test | ",
      "postingDocument": "123"
    }