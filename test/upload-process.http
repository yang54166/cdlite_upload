### Authenticate
# @name auth
POST https://erpdevsd.authentication.eu10.hana.ondemand.com/oauth/token HTTP/1.1
Content-type: application/x-www-form-urlencoded

grant_type=client_credentials
&client_id=sb-cd_cdlitepayrollupload_fs-ErpDevOrg-ErpDevSpcCdApp!t126539
&client_secret=PeK8fptaCVkDFYEgQOlb/eChcZQ%3D


### Create Upload
# @name batchResponse
POST http://localhost:4004/payroll/StagingUploads
Authorization: Bearer {{auth.response.body.access_token}}
Content-Type: application/json

{
   "glCompanyCode": "US10",
   "transactionType": "01",
   "currencyCode": "USD",
   "payrollDate": "2023-01-15",
   "glPeriod": "202301",
   "effectivePeriod": "202301",
   "batchDescription": "Payroll Testing US",
   "remarks": "Dan Testing"
}


### Upload File
PUT http://localhost:4004/payroll/PayrollUploadFile/content HTTP/1.1
Authorization: Bearer {{auth.response.body.access_token}}
Content-Type: plain/text
Content-Disposition: form-data; filename="Test-Payroll-File- U2-TranType01-Project.txt"; batchID="{{batchResponse.response.body.ID}}"

< ./testUploads/Test-Payroll-File- U2-TranType01-Project.txt

### Upload File (v4)
PUT http://localhost:4004/payroll/PayrollUploadFile/content HTTP/1.1
Authorization: Bearer {{auth.response.body.access_token}}
Content-Type: plain/text
Content-Disposition: form-data; filename="Sprint 2 Demo V1 US10 Payroll v4.txt"; batchID="{{batchResponse.response.body.ID}}"

< ./testUploads/Sprint 2 Demo V1 US10 Payroll v4a.txt


### Approve
POST http://localhost:4004/payroll/StagingUploads({{batchResponse.response.body.ID}})/approve
Authorization: Bearer {{auth.response.body.access_token}}
Content-Type: application/json

{}

### Enrich
POST http://localhost:4004/payroll/StagingUploads(391)/enrich
Authorization: Bearer {{auth.response.body.access_token}}
Content-Type: application/json

{}

### Trigger
POST http://localhost:4004/payroll/StagingUploads({{batchResponse.response.body.ID}})/trigger
Authorization: Bearer {{auth.response.body.access_token}}
Content-Type: application/json

{}

### Trigger
POST http://localhost:4004/payroll/StagingUploads(250)/trigger
Authorization: Bearer {{auth.response.body.access_token}}
Content-Type: application/json

{}

### View JournalEntry
GET http://localhost:4004/payroll/JournalEntry?$filter=BATCHID eq {{batchResponse.response.body.ID}}&$expand=items
Authorization: Bearer {{auth.response.body.access_token}}
Content-Type: application/json


### Posting Batch - View
GET http://localhost:4004/payroll/PostingBatch?$filter=batchId eq 281
Authorization: Bearer {{auth.response.body.access_token}}
Content-Type: application/json

### Posting Batch - Update
PUT http://localhost:4004/payroll/PostingBatch(batchId=281,postingBatchId='1.1')
Authorization: Bearer {{auth.response.body.access_token}}
Content-Type: application/json

 {
      "batchId": 281,
      "postingBatchId": "1.1",
      "postingStatus": "SUCCESS",
      "postingStatusMessage": " | Document posted successfully: BKPFF 1700000399US102023 SD1CLNT200 | ",
      "postingDocument": "1700000399US102023"
    }